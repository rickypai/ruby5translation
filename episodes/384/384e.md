##Episode #384 - July 9, 2013
The Original site is [Episode #384 on Ruby5](http://ruby5.envylabs.com/episodes/420-episode-384-july-9-2013)

Decluttering lib, Puma vs. Passenger, Exception Notification 4.0, Ettu and ETags, Octopus 0.6.0, 
The self-pipe trick

* Nathaniel Bibler
* Carlos Souza

---

###This episode is sponsored by Top Ruby Jobs 
####If you're looking for a top Ruby job or for top Ruby talent, then you should check out Top Ruby Jobs. Top Ruby Jobs is a website dedicated to the best jobs available in the Ruby community.

C: Today is Tuesday July 9th 2013, and You're listening  to Ruby5. I'm Carlos Souza..

N: ..and Nathaniel Bibler..

C: ..and Ruby5 is suponsered by Top Ruby Jobs. International Technological University in looking for a senior Ruby on Rails developer in San Jose, California.

N: Leysin American School in Switzerland is looking for Ruby programmer in Leysin, Switzerland

C: So if you're looking for a top Ruby gig or a top Ruby talent, check out toprubyjobs.com .
---

###Declutter Lib 
####Kuba Suder wrote a blog post on how to declutter the lib directory in Rails apps based on his experience cleaning up his own.

C: So Nate, if one most look under the lib folder on your current Rails project, how many different files would be define.

N: Oh I don't even know..

C: ..and I don't blame you. Rails has a pretty well define directory structure for Models, View, Controllers, and more recently Assets, Mailer as well. But the `lib` folder has always been a solved place shows about anything that doesn't fallen into Rails creates for you. For this reason, Kuba Suder wrote a blog post on how to declutter the lib directory in Rails apps based on his experience cleaning up his own.

N: Oh cool. So what does he told me that I can do to clean up the `lib` folder.

C: He mentions everything that relates to your app should be out of `lib` and under the `app` folder. 

N: All right. So maybe think like Decorators, Presenters, Service objects, Back ground jobs, should be going in that like sub folder in the `app`.

C: Exactly, and also Rails4 now creates `app/models/concern`, `app/controllers/concern` folder, which should be use modules and tend to be mixin to another classes.

N: All right. So what can stand `lib` then? 

C: According to Kuba, the `lib` directory should contain only those files generic in could be reusable another projects. Examples are ??? web services, Database tools, Extensions to core Ruby classes, and basically anything that could be extracted into its own Ruby gem. So check out the blog post for more information and basig guideline for keeping `lib` folder clean.   

---

###Puma vs. Passenger
####The guys from Phusion wrote up a very detailed article comparing their Phusion Passenger app server with Puma. It goes over multiple aspects, like concurrency, deployment models, performance for both CPU and I/O ­bound applications, memory usage, management tools, garbage collection, debugging, fault­ tolerance, resource control, documentation and runtime support.

N: The guys from Phusion wrote up a very detailed article comparing their Phusion Passenger app server with Puma.

C: Wait, wait, You're saying that that did not include my all time favorite web WEBrick in there? Come on.

N: No we're actually talking about real app servers here.

C: All right, so what does the article say?

N: It goes so far well tons of aspect about these are application servers. For example, like a how each handles concurrency 
~~~~

---

###Exception Notification 4.0 
####Sebastian Martinez has recently released version 4.0 of the Exception Notification gem. The new version includes bug fixes, support for sidekiq and resque, better logging for notification errors and it's Rails 4 compatible. It also adds email and campfire notifiers, support for Webhooks, custom notifiers and it introduces a couple of changes the configuration API.

C: Sebastian Martinez has recently released version 4.0 of the `exception_notification` gem.

N: This is the gem notify you errors occurs rack or Rails application and sense over e-mail or campfire notification. So what's new 4.0?

C: They're some bug fixes bunch of enhancements like support for `sidekiq` and `resque`, better logging for notification errors and it's Rails 4 compatible. 

N: Nice. I like myself some Rails quattro.

C: There's more, in addition to existing email and campfire notifiere, there's  now support Webhooks, where you give a URL to post a new notification to, and also custom notifiers which basically Ruby object respond to call. This new 4.0 version now also changes the configuration API. So check out the project document for more information.

---

###Ettu generates smarter ETags 
####The Ettu gem transparently adds your view templates, JavaScript and CSS files into the Rails ­generated ETag equation.

C: The guys over Cloud space recently released the `ettu` gem which transparently adds your view templates, JavaScript and CSS files into the Rails ­generated ETag equation.

N: Why does it do that?

C: Oh well, OK so ETags are usetle client browser as know quickly wa pay a change, or more importantly not change. and allows bypass network load time for cotantaly have response not modify. And network really seems ?? well, add web server level static file, but if you won't no dynamic Rails  points to the same, you might have a problem.

N: Oh I see, so like I wanna pass Active record object to it refresh when call my controller. 

C: Right, Rails calls object cash key method to generate ETag and complitelly bypasses any view code like Template Assets, it gives your performance advantage but it might cause some issue download.

N: Oh because well my database data might not have changed maybe CSS did, and ETag doesn't represent it well by default. 

C: Exactly if you change CSS or Javascript and deploy, you might have a problem. You can run issue where your visitors trying pull down all assets don't exists any more because ETag page sought had was a same. And that's still using old assets. 

N: So how do I use this 'ettu' and what does syntax?

C: It doesn't effect fresh one syntax at all. You just keep using fresh one the way that you use to. So Simply adding the gem `ettu` to `Gemfile` does for you.

---

###Octopus 0.6.0 was released 
####The Octopus gem allows you to do Database Sharding in ActiveRecord and they just released version 0.6.0. A couple of different things are new in this version, like some refactorings and clean ups, removal of the Octopus::Logger, using the MySQL2 Driver instead of MySQL for the spec suite and, most importantly dropping support for Rails 2.x. If you need Rails 2, then Octopus 0.5 is the latest version that you can use. Octopus 0.6 is Rails 3 only and the not­-yet-­released Octopus 0.7 is planning to support Rails 4.

N: Have you heard of `Octopus`?

C: I've heard of `Octopus` and I like the way taste.

N: Well, Not the type of I'm taking about. The what I'm talking about is `octopus` gem that allows you to do Database sharing in ActiveRecord. and they just released version 0.6.0 . 

C: Database sharing, that's when you use different database servers all within one application.
 
N: Yes, and molder several project out there impliment chering, like DBchermaer, data fabric, molta DB, each project has own limitation. The mingle of `octopus` is provide better way of doing database sharing through way simple API. 

C: Oh nice, so what's new in this version?

N: A couple of different things are new in this version, like some refactorings and clean ups, removal of the Octopus::Logger, using the MySQL2 Driver instead of MySQL for the spec suite and, most importantly dropping support for Rails 2.  If you need Rails 2, then Octopus 0.5 is the latest version that you can use. Octopus 0.6 is Rails 3 only and the not­-yet-­released Octopus 0.7 is planning to support Rails 4.

---

###The self-pipe trick 
####Jesse Storrimer wrote an article on RubySource in which he shows a couple of caveats when working with UNIX signals and how you can solve them using a trick called the self­-pipe.

---

###Thank You for Listening to Ruby5 
####Ruby5 is released Tuesday and Friday mornings. To stay informed about and active with this podcast, we encourage you to do one of the following:

Follow [Envy Labs](http://twitter.com/envylabs) on Twitter
Or, subscribe with [iTunes](http://itunes.apple.com/WebObjects/MZStore.woa/wa/viewPodcast?id=327234205) or [RSS](http://feeds.feedburner.com/Ruby5)
This episode was co-produced and edited by audio guru [Jamison Rabb](https://twitter.com/jamisonrabbee).